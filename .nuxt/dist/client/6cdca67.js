(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{407:function(e,t,o){var content=o(416);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(133).default)("3081a03a",content,!0,{sourceMap:!1})},414:function(e,t,o){e.exports=o.p+"img/house.ab0d2ca.png"},415:function(e,t,o){"use strict";o(407)},416:function(e,t,o){var n=o(132)((function(i){return i[1]}));n.push([e.i,".map-container-wrapper[data-v-5fb13ba3]{align-items:center;display:flex;justify-content:center}.map-container[data-v-5fb13ba3]{background-color:#fff;border:#b3d1c8}.header-style[data-v-5fb13ba3]{background-color:#fff;text-transform:capitalize}.title-style[data-v-5fb13ba3]{color:#006400}",""]),n.locals={},e.exports=n},420:function(e,t,o){"use strict";o.r(t);o(20),o(40),o(51);var n=o(401),r=o.n(n),l={name:"AMap",props:{dormArea:String,dormBuilding:String,newDorm:["reset-selection"]},data:function(){return{mapWidth:"80%",mapHeight:"600px",margin:"0",position:"justify",newLabelsData:[],isLoaded:!1,showBuilding:!1,currentBuilding:"",currentZone:"",currentDescription:"",currentImage:null}},mounted:function(){var e=this;this.initMap(),window._AMapSecurityConfig={securityJsCode:"6dcf279b3051f93ca87a74cf70cca816"},r.a.get("http://8.138.105.61/api/builds/").then((function(t){e.APIFormData=t.data,e.APIFormData.forEach((function(n){console.log("Received data"),console.log(t.data);n.id;var r=n.name,l=n.photo,c=n.zone,d=n.buildingDetails,h={name:c+" "+r,area:c,building:r,position:[n.xlocation,n.ylocation],zooms:[3,20],opacity:1,zIndex:5,visible:!0,icon:{type:"image",image:o(414),size:[64,64],anchor:"center"},photo:l,buildingDetails:d,text:{content:c+" "+r+" Building",direction:"right",offset:[-100,40],style:{backgroundColor:"white",borderColor:"#fff",fontSize:16,fontWeight:"bold",fillColor:"black",strokeWidth:2}}};e.newLabelsData.push(h)})),e.showForm=!0})).catch((function(t){e.APIFormData="",e.error=t.message||"An error occurred"}))},methods:{loadMap:function(){this.isLoaded=!0},handleRoute:function(){this.$router.push({name:"DormView",params:{zone:this.currentZone,building:this.currentBuilding}})},handleCloseBuilding:function(){this.showBuilding=!1},selectDorm:function(e){this.showBuilding=!0,this.currentZone=e.area,this.currentBuilding=e.building,this.currentImage=e.photo,this.currentDescription=e.buildingDetails,console.log(e.area,e.building)},resetSelection:function(){},initMap:function(){var e=this,script=document.createElement("script");script.src="//webapi.amap.com/maps?v=2.0&key=20db94d3028c1d2472ae4f29ab518e4b&plugin=AMap.ControlBar,AMap.ToolBar",script.async=!0,script.onload=function(){var map=new AMap.Map("map-container",{rotateEnable:!0,pitchEnable:!0,zoom:17,pitch:50,rotation:-15,viewMode:"3D",zooms:[2,20],center:[113.99913918407441,22.60212445711336]});new AMap.ControlBar({position:{right:"10px",top:"10px"}}).addTo(map),new AMap.ToolBar({position:{right:"40px",top:"110px"}}).addTo(map);var t=e.newLabelsData;console.log(t);for(var o,n=[],r=new AMap.LabelsLayer({zooms:[3,20],zIndex:1e3,allowCollision:!1}),l=function(){var r=t[i];r.extData={index:i},console.log(r),(o=new AMap.LabelMarker(r)).on("click",(function(){e.selectDorm(r)})),n.push(o)},i=0;i<t.length;i++)l();r.add(n),map.add(r)},document.head.appendChild(script)}}},c=(o(415),o(50)),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"map-container"},[t("h1",{staticClass:"title-style"},[e._v("Search Dormitory on This Map!")]),e._v(" "),t("div",{staticClass:"map-container-wrapper"},[t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.dormArea||null==e.dormBuilding,expression:"dormArea == null || dormBuilding == null"}],style:{width:e.mapWidth,height:e.mapHeight},attrs:{id:"map-container"}}),e._v(" "),t("el-dialog",{attrs:{visible:e.showBuilding,"close-on-click-modal":!0,"close-on-press-escape":!0,"before-close":e.handleCloseBuilding},on:{"update:visible":function(t){e.showBuilding=t}}},[t("div",{staticClass:"floor-plan-image"},[t("div",[t("h1",{staticClass:"header-style"},[e._v(e._s(e.currentZone+" "+e.currentBuilding))]),e._v(" "),t("img",{attrs:{src:e.currentImage,alt:"@/static/dorm/noimage.png"}}),e._v(" "),t("p",[e._v(e._s(e.currentDescription))])]),e._v(" "),t("el-button",{on:{click:e.handleRoute}},[e._v("Details")])],1)])],1)])}),[],!1,null,"5fb13ba3",null);t.default=component.exports}}]);